# LangChain-Go & LangGraph-Go é‡å†™é¡¹ç›® Cursor Rules

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªç”¨ Go é‡å†™ LangChain 1.2+ å’Œ LangGraph 1.0+ çš„é¡¹ç›®ã€‚

**æ ¸å¿ƒç›®æ ‡ï¼š**
- å®ç° LangGraph 1.0+ å…¨éƒ¨æ ¸å¿ƒåŠŸèƒ½ï¼ˆStateGraphã€Checkpointingã€Human-in-the-Loopï¼‰
- å®ç° LangChain æ ¸å¿ƒæŠ½è±¡ï¼ˆRunnableã€ChatModelã€Toolsï¼‰
- æ€§èƒ½ç›®æ ‡ï¼šå¹¶å‘æ€§èƒ½æå‡ 10x+ï¼Œå†…å­˜é™ä½ 50%+

**æŠ€æœ¯æ ˆï¼š**
- Go 1.22+ (éœ€è¦æ³›å‹æ”¯æŒ)
- PostgreSQL/SQLite (Checkpointing)
- æ ‡å‡†åº“ä¼˜å…ˆï¼ˆå‡å°‘ä¾èµ–ï¼‰

---

## ä»£ç è§„èŒƒ

### 1. æ–‡ä»¶ç»„ç»‡

```
æ¯ä¸ªåŒ…åº”åŒ…å«ï¼š
- interface.go: æ¥å£å®šä¹‰
- types.go: ç±»å‹å®šä¹‰
- impl.go: å®ç°ä»£ç 
- options.go: é€‰é¡¹æ¨¡å¼
- xxx_test.go: æµ‹è¯•æ–‡ä»¶
- doc.go: åŒ…æ–‡æ¡£
```

### 2. å‘½åè§„èŒƒ

- **æ¥å£**: ä½¿ç”¨åè¯ï¼Œå¦‚ `Runnable`, `ChatModel`, `Saver`
- **å®ç°**: ä½¿ç”¨å½¢å®¹è¯+åè¯ï¼Œå¦‚ `PostgresSaver`, `OpenAIChatModel`
- **å‡½æ•°**: ä½¿ç”¨åŠ¨è¯å¼€å¤´ï¼Œå¦‚ `NewXxx`, `CreateAgent`, `ExecuteNode`
- **ç§æœ‰å­—æ®µ**: å°å†™å¼€å¤´ï¼Œå¦‚ `nodes`, `edges`

### 3. é”™è¯¯å¤„ç†

```go
// å®šä¹‰åŒ…çº§é”™è¯¯
var (
    ErrInvalidInput = errors.New("xxx: invalid input")
    ErrNotFound     = errors.New("xxx: not found")
)

// ä½¿ç”¨ fmt.Errorf åŒ…è£…é”™è¯¯
return fmt.Errorf("failed to execute node %s: %w", name, err)

// é”™è¯¯æ£€æŸ¥
if err != nil {
    return fmt.Errorf("xxx: %w", err)
}
```

### 4. æ³›å‹ä½¿ç”¨

```go
// ä¼˜å…ˆä½¿ç”¨æ³›å‹æä¾›ç±»å‹å®‰å…¨
type Runnable[I, O any] interface {
    Invoke(ctx context.Context, input I) (O, error)
}

// çŠ¶æ€å›¾ä½¿ç”¨æ³›å‹
type StateGraph[S any] struct {
    // ...
}
```

### 5. æ¥å£è®¾è®¡

```go
// æ¥å£åº”è¯¥å°è€Œä¸“æ³¨
type Reader interface {
    Read(p []byte) (n int, err error)
}

// ç»„åˆè€Œéç»§æ‰¿
type ReadWriter interface {
    Reader
    Writer
}
```

### 6. é€‰é¡¹æ¨¡å¼

```go
// ä½¿ç”¨å‡½æ•°é€‰é¡¹æ¨¡å¼
type Option func(*Options)

func WithTimeout(d time.Duration) Option {
    return func(o *Options) {
        o.Timeout = d
    }
}

// ä½¿ç”¨
New(WithTimeout(5*time.Second), WithRetries(3))
```

### 7. Context ä½¿ç”¨

```go
// æ‰€æœ‰ I/O æ“ä½œå¿…é¡»æ¥å— context
func (s *Saver) Put(ctx context.Context, cp Checkpoint) error {
    // æ£€æŸ¥å–æ¶ˆ
    select {
    case <-ctx.Done():
        return ctx.Err()
    default:
    }
    
    // ä¼ é€’ç»™ä¸‹æ¸¸
    return s.db.ExecContext(ctx, query, args...)
}
```

### 8. å¹¶å‘å®‰å…¨

```go
// ä½¿ç”¨ sync.Mutex ä¿æŠ¤å…±äº«çŠ¶æ€
type SafeMap struct {
    mu   sync.RWMutex
    data map[string]any
}

func (m *SafeMap) Get(key string) (any, bool) {
    m.mu.RLock()
    defer m.mu.RUnlock()
    val, ok := m.data[key]
    return val, ok
}
```

### 9. Channel ä½¿ç”¨

```go
// æµå¼è¾“å‡ºä½¿ç”¨ channel
func (r *Runnable) Stream(ctx context.Context, input I) (<-chan Event[O], error) {
    out := make(chan Event[O], 100) // å¸¦ç¼“å†²
    
    go func() {
        defer close(out) // å¿…é¡»å…³é—­
        
        // æ£€æŸ¥å–æ¶ˆ
        select {
        case <-ctx.Done():
            return
        case out <- event:
        }
    }()
    
    return out, nil
}
```

---

## æ ¸å¿ƒè®¾è®¡æ¨¡å¼

### 1. Runnable æ¥å£

```go
// æ‰€æœ‰å¯æ‰§è¡Œç»„ä»¶éƒ½å®ç°æ­¤æ¥å£
type Runnable[I, O any] interface {
    Invoke(ctx context.Context, input I, opts ...Option) (O, error)
    Batch(ctx context.Context, inputs []I, opts ...Option) ([]O, error)
    Stream(ctx context.Context, input I, opts ...Option) (<-chan StreamEvent[O], error)
}

// ç»„åˆæ–¹å¼ï¼šPipe
func Pipe[A, B, C any](first Runnable[A, B], second Runnable[B, C]) Runnable[A, C] {
    return &sequence[A, B, C]{first, second}
}
```

### 2. StateGraph æ¨¡å¼

```go
// å£°æ˜å¼ API
graph := state.NewStateGraph[MyState]("my-graph")

graph.AddNode("agent", agentNode).
    AddNode("tools", toolsNode).
    SetEntryPoint("agent").
    AddConditionalEdges("agent", routeFn, map[string]string{
        "continue": "tools",
        "end":      state.END,
    }).
    AddEdge("tools", "agent")

compiled := graph.Compile()
```

### 3. Checkpointing æ¨¡å¼

```go
// æ¥å£å®šä¹‰
type Saver interface {
    Put(ctx context.Context, config Config, cp Checkpoint) error
    Get(ctx context.Context, config Config) (*Checkpoint, error)
    List(ctx context.Context, config Config, opts ListOptions) ([]Checkpoint, error)
}

// ä½¿ç”¨
graph.WithCheckpointer(postgresaver).
    WithDurability(durability.ModeSync)
```

### 4. Human-in-the-Loop æ¨¡å¼

```go
// èŠ‚ç‚¹ä¸­è§¦å‘ä¸­æ–­
func approvalNode(ctx context.Context, state State) (State, error) {
    if state.RequiresApproval {
        hitl.TriggerInterrupt(hitl.Interrupt{
            Type:    hitl.InterruptApproval,
            Message: "è¯·å®¡æ‰¹æ­¤æ“ä½œ",
        })
    }
    return state, nil
}

// æ¢å¤æ‰§è¡Œ
result, err := executor.Resume(ctx, threadID, hitl.ResumeData{
    Action: hitl.ActionApprove,
})
```

### 5. Middleware æ¨¡å¼

```go
// ä¸­é—´ä»¶æ¥å£
type Middleware interface {
    BeforeModel(ctx context.Context, state *State) (*State, error)
    AfterModel(ctx context.Context, state *State, resp *Message) (*State, error)
}

// ä¸­é—´ä»¶é“¾
agent := agents.CreateAgent(agents.Config{
    Model: model,
    Middleware: []Middleware{
        logging.New(),
        hitl.New(hitl.Config{...}),
    },
})
```

---

## æµ‹è¯•è§„èŒƒ

### 1. æµ‹è¯•æ–‡ä»¶å‘½å

```
file.go       -> file_test.go
interface.go  -> interface_test.go
```

### 2. æµ‹è¯•å‡½æ•°å‘½å

```go
// åŸºç¡€æµ‹è¯•
func TestFunctionName(t *testing.T) {}

// è¡¨æ ¼é©±åŠ¨æµ‹è¯•
func TestFunctionName_Cases(t *testing.T) {
    tests := []struct {
        name    string
        input   Input
        want    Output
        wantErr bool
    }{
        {"normal case", input1, output1, false},
        {"error case", input2, nil, true},
    }
    
    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            // ...
        })
    }
}
```

### 3. Mock ä½¿ç”¨

```go
// ä½¿ç”¨æ¥å£è¿›è¡Œ mock
type MockSaver struct {
    PutFunc func(ctx context.Context, config Config, cp Checkpoint) error
}

func (m *MockSaver) Put(ctx context.Context, config Config, cp Checkpoint) error {
    if m.PutFunc != nil {
        return m.PutFunc(ctx, config, cp)
    }
    return nil
}
```

### 4. å¿…é¡»æµ‹è¯•çš„åœºæ™¯

- âœ… æ­£å¸¸è·¯å¾„
- âœ… é”™è¯¯å¤„ç†
- âœ… è¾¹ç•Œæ¡ä»¶
- âœ… å¹¶å‘å®‰å…¨
- âœ… Context å–æ¶ˆ
- âœ… èµ„æºæ¸…ç†

---

## æ–‡æ¡£è§„èŒƒ

### 1. åŒ…æ–‡æ¡£ (doc.go)

```go
// Package graph æä¾› LangGraph çŠ¶æ€å›¾å®ç°ã€‚
//
// StateGraph æ˜¯æ ¸å¿ƒç±»å‹ï¼Œç”¨äºå®šä¹‰æœ‰å‘å›¾å·¥ä½œæµï¼š
//
//   g := graph.NewStateGraph[MyState]("example")
//   g.AddNode("start", startNode)
//   g.AddEdge("start", "end")
//   compiled := g.Compile()
//
// æ”¯æŒçš„åŠŸèƒ½ï¼š
//   - æ¡ä»¶è¾¹å’Œå¾ªç¯
//   - æ£€æŸ¥ç‚¹æŒä¹…åŒ–
//   - Human-in-the-Loop
//   - æµå¼è¾“å‡º
//
package graph
```

### 2. ç±»å‹æ–‡æ¡£

```go
// StateGraph è¡¨ç¤ºä¸€ä¸ªçŠ¶æ€å›¾å·¥ä½œæµã€‚
//
// StateGraph ä½¿ç”¨æ³›å‹å‚æ•° S è¡¨ç¤ºçŠ¶æ€ç±»å‹ï¼ŒçŠ¶æ€åœ¨èŠ‚ç‚¹é—´æµè½¬ã€‚
//
// ç¤ºä¾‹ï¼š
//
//   type MyState struct {
//       Counter int
//   }
//
//   g := NewStateGraph[MyState]("counter")
//
type StateGraph[S any] struct {
    // ...
}
```

### 3. å‡½æ•°æ–‡æ¡£

```go
// AddNode å‘å›¾ä¸­æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ã€‚
//
// å‚æ•°ï¼š
//   - name: èŠ‚ç‚¹åç§°ï¼Œå¿…é¡»å”¯ä¸€
//   - fn: èŠ‚ç‚¹å‡½æ•°ï¼Œæ¥æ”¶çŠ¶æ€å¹¶è¿”å›æ–°çŠ¶æ€
//
// è¿”å›ï¼š
//   - *StateGraph[S]: è¿”å›è‡ªèº«æ”¯æŒé“¾å¼è°ƒç”¨
//
// å¦‚æœèŠ‚ç‚¹åç§°å·²å­˜åœ¨ï¼Œä¼šè¦†ç›–åŸæœ‰èŠ‚ç‚¹ã€‚
//
func (g *StateGraph[S]) AddNode(name string, fn NodeFunc[S]) *StateGraph[S] {
    // ...
}
```

### 4. é¡¹ç›®æ–‡æ¡£ç»“æ„ â­

**æ ¹ç›®å½•å¿…éœ€æ–‡æ¡£**ï¼š
```
README.md              - é¡¹ç›®ä¸»é¡µï¼Œç¬¬ä¸€å°è±¡ï¼ˆå¿…è¯»ï¼‰
CHANGELOG.md           - å®Œæ•´çš„ç‰ˆæœ¬å˜æ›´æ—¥å¿—ï¼ˆKeep a Changelog æ ¼å¼ï¼‰
CONTRIBUTING.md        - è´¡çŒ®æŒ‡å—
DOCUMENTATION_STRUCTURE.md - æ–‡æ¡£ç»“æ„è¯´æ˜
QUICK_START.md        - 5 åˆ†é’Ÿå¿«é€Ÿå¼€å§‹
TESTING.md            - æµ‹è¯•æŒ‡å—
LICENSE               - è®¸å¯è¯
```

**docs/ ç›®å½•ç»“æ„**ï¼š
```
docs/
â”œâ”€â”€ README.md                    # æ–‡æ¡£ç´¢å¼•
â”œâ”€â”€ releases/                    # å‘å¸ƒæ–‡æ¡£ï¼ˆé›†ä¸­ç®¡ç†ï¼‰â­
â”‚   â”œâ”€â”€ README.md               # å‘å¸ƒå†å²ç´¢å¼•
â”‚   â”œâ”€â”€ RELEASE_NOTES_vX.X.X.md # å®Œæ•´å‘å¸ƒè¯´æ˜
â”‚   â”œâ”€â”€ GITHUB_RELEASE_vX.X.X.md # GitHub Release å…¬å‘Š
â”‚   â”œâ”€â”€ RELEASE_CHECKLIST_vX.X.X.md # å‘å¸ƒæ£€æŸ¥æ¸…å•
â”‚   â””â”€â”€ RELEASE_GUIDE_vX.X.X.md # å‘å¸ƒæŒ‡å—
â”œâ”€â”€ guides/                      # ä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ rag/
â”‚   â””â”€â”€ tools/
â”œâ”€â”€ reference/                   # API å‚è€ƒ
â””â”€â”€ VX.X.X_*.md                 # ç‰ˆæœ¬æŠ€æœ¯æ–‡æ¡£
```

**examples/ ç›®å½•**ï¼š
- æ¯ä¸ªç¤ºä¾‹åŒ…å« `main.go` + `README.md`
- æŒ‰åŠŸèƒ½åˆ†ç±»ç»„ç»‡
- å¿…é¡»å¯è¿è¡Œ

### 5. Markdown æ–‡æ¡£è§„èŒƒ

**é€šç”¨è¦æ±‚**ï¼š
- ä½¿ç”¨ Markdown æ ¼å¼
- ä¸­æ–‡ä¸ºä¸»ï¼Œä»£ç æ³¨é‡Šå¯ä¸­è‹±æ··åˆ
- æ¸…æ™°çš„æ ‡é¢˜å±‚çº§ï¼ˆH1-H6ï¼‰
- æä¾›å®Œæ•´å¯è¿è¡Œçš„ä»£ç ç¤ºä¾‹
- ä½¿ç”¨ç›¸å¯¹è·¯å¾„é“¾æ¥å…¶ä»–æ–‡æ¡£

**README.md å¿…éœ€å†…å®¹**ï¼š
```markdown
# é¡¹ç›®åç§°

å¾½ç« ï¼ˆç‰ˆæœ¬ã€è®¸å¯è¯ã€æµ‹è¯•çŠ¶æ€ï¼‰

## ç®€ä»‹ï¼ˆ30 å­—å†…ï¼‰

## âœ¨ æ ¸å¿ƒç‰¹æ€§ï¼ˆ3-5 ä¸ªäº®ç‚¹ï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹
### å®‰è£…
### 30 ç§’ä¸Šæ‰‹ä»£ç 

## ğŸ“– æ–‡æ¡£é“¾æ¥

## ğŸ¤ è´¡çŒ®

## ğŸ“„ è®¸å¯è¯
```

**ç¤ºä¾‹ README.md å¿…éœ€å†…å®¹**ï¼š
```markdown
# åŠŸèƒ½åç§° - ç¤ºä¾‹

ç®€çŸ­è¯´æ˜

## åŠŸèƒ½æ¼”ç¤º

## è¿è¡Œç¤ºä¾‹

## æ ¸å¿ƒæ¦‚å¿µ

## ä½¿ç”¨ç¤ºä¾‹

## ç›¸å…³æ–‡æ¡£
```

---

## æ€§èƒ½ä¼˜åŒ–æŒ‡å—

### 1. é¿å…ä¸å¿…è¦çš„åˆ†é…

```go
// Bad: æ¯æ¬¡è°ƒç”¨éƒ½åˆ†é…
func process(items []string) []Result {
    results := []Result{} // åˆå§‹å®¹é‡ä¸º 0
    for _, item := range items {
        results = append(results, Result{})
    }
    return results
}

// Good: é¢„åˆ†é…å®¹é‡
func process(items []string) []Result {
    results := make([]Result, 0, len(items))
    for _, item := range items {
        results = append(results, Result{})
    }
    return results
}
```

### 2. ä½¿ç”¨ sync.Pool

```go
// å¤ç”¨å¯¹è±¡
var bufferPool = sync.Pool{
    New: func() any {
        return new(bytes.Buffer)
    },
}

func processData(data []byte) {
    buf := bufferPool.Get().(*bytes.Buffer)
    defer func() {
        buf.Reset()
        bufferPool.Put(buf)
    }()
    // ä½¿ç”¨ buf
}
```

### 3. å¹¶å‘æ‰§è¡Œ

```go
// Batch æ–¹æ³•å¹¶è¡Œæ‰§è¡Œ
func (r *Runnable[I, O]) Batch(ctx context.Context, inputs []I) ([]O, error) {
    results := make([]O, len(inputs))
    var wg sync.WaitGroup
    var mu sync.Mutex
    var firstErr error
    
    for i, input := range inputs {
        wg.Add(1)
        go func(idx int, in I) {
            defer wg.Done()
            result, err := r.Invoke(ctx, in)
            mu.Lock()
            defer mu.Unlock()
            if err != nil && firstErr == nil {
                firstErr = err
            }
            results[idx] = result
        }(i, input)
    }
    
    wg.Wait()
    return results, firstErr
}
```

---

## å®‰å…¨è§„èŒƒ

### 1. è¾“å…¥éªŒè¯

```go
// æ€»æ˜¯éªŒè¯è¾“å…¥
func NewConfig(apiKey string) (*Config, error) {
    if apiKey == "" {
        return nil, ErrAPIKeyRequired
    }
    if len(apiKey) < 32 {
        return nil, ErrInvalidAPIKey
    }
    return &Config{apiKey: apiKey}, nil
}
```

### 2. æ•æ„Ÿä¿¡æ¯å¤„ç†

```go
// ä¸è¦åœ¨æ—¥å¿—ä¸­è¾“å‡ºæ•æ„Ÿä¿¡æ¯
type Config struct {
    apiKey string // å°å†™ï¼Œä¸å¯¼å‡º
}

// String éšè—æ•æ„Ÿä¿¡æ¯
func (c Config) String() string {
    return fmt.Sprintf("Config{apiKey: ***%s}", c.apiKey[len(c.apiKey)-4:])
}
```

### 3. èµ„æºæ¸…ç†

```go
// ä½¿ç”¨ defer ç¡®ä¿èµ„æºé‡Šæ”¾
func process(filename string) error {
    f, err := os.Open(filename)
    if err != nil {
        return err
    }
    defer f.Close() // ç¡®ä¿å…³é—­
    
    // å¤„ç†æ–‡ä»¶
    return nil
}
```

---

## ä¾èµ–ç®¡ç†

### 1. æœ€å°ä¾èµ–åŸåˆ™

```
ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“ï¼Œä»…åœ¨å¿…è¦æ—¶å¼•å…¥å¤–éƒ¨ä¾èµ–ï¼š

å¿…éœ€ä¾èµ–ï¼š
- github.com/jackc/pgx/v5  (PostgreSQL)
- github.com/mattn/go-sqlite3 (SQLite)

å¯é€‰ä¾èµ–ï¼š
- github.com/stretchr/testify (æµ‹è¯•)
- github.com/google/uuid (UUID)
```

### 2. ç‰ˆæœ¬å›ºå®š

```go
// go.mod
require (
    github.com/jackc/pgx/v5 v5.5.0
)
```

---

## æäº¤è§„èŒƒ

### 1. Commit Message æ ¼å¼

```
<type>(<scope>): <subject>

<body>

<footer>
```

**ç±»å‹ (type):**
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤ bug
- `refactor`: é‡æ„
- `test`: æµ‹è¯•
- `docs`: æ–‡æ¡£
- `chore`: æ„å»º/å·¥å…·

**ç¤ºä¾‹:**
```
feat(graph): implement StateGraph with conditional edges

- Add StateGraph core structure
- Support conditional edges
- Add basic validation

Refs: #M24
```

### 2. åˆ†æ”¯ç­–ç•¥

```
main          - ç¨³å®šç‰ˆæœ¬
develop       - å¼€å‘åˆ†æ”¯
feature/M24   - åŠŸèƒ½åˆ†æ”¯ï¼ˆæŒ‰æ¨¡å—ç¼–å·ï¼‰
fix/issue-123 - ä¿®å¤åˆ†æ”¯
```

### 3. æäº¤æ—¶æœºè§„åˆ™ â­

**é‡è¦ï¼šæ¯æ¬¡å®ç°ä¸€ä¸ªæ¯”è¾ƒç‹¬ç«‹å’Œå®Œæ•´çš„åŠŸèƒ½æ¨¡å—æ—¶ï¼Œå¿…é¡»è¿›è¡Œ git commit**

#### ä½•æ—¶æäº¤ï¼š

1. **å®Œæˆå•ä¸ªåŠŸèƒ½æ¨¡å—** - å½“å®ç°äº†ä¸€ä¸ªå®Œæ•´çš„ã€å¯ç‹¬ç«‹è¿è¡Œçš„åŠŸèƒ½æ¨¡å—æ—¶
   - ç¤ºä¾‹ï¼šå®Œæˆ `ChatModel` å®ç°
   - ç¤ºä¾‹ï¼šå®Œæˆ `StateGraph` æ ¸å¿ƒåŠŸèƒ½
   - ç¤ºä¾‹ï¼šå®Œæˆ `Milvus` å‘é‡å­˜å‚¨é›†æˆ

2. **å®Œæˆç›¸å…³åŠŸèƒ½ç»„** - å½“å®ç°äº†ä¸€ç»„ç´§å¯†ç›¸å…³çš„åŠŸèƒ½æ—¶
   - ç¤ºä¾‹ï¼šå®Œæˆ Checkpoint çš„ Memoryã€SQLiteã€Postgres ä¸‰ä¸ªå®ç°
   - ç¤ºä¾‹ï¼šå®Œæˆ Document Loaders + Text Splitters

3. **é‡è¦é‡Œç¨‹ç¢‘** - å½“å®Œæˆä¸€ä¸ªé˜¶æ®µçš„æ‰€æœ‰åŠŸèƒ½æ—¶
   - ç¤ºä¾‹ï¼šPhase 1 åŸºç¡€æ ¸å¿ƒå…¨éƒ¨å®Œæˆ
   - ç¤ºä¾‹ï¼šPhase 2 LangGraph æ ¸å¿ƒå…¨éƒ¨å®Œæˆ

4. **æ–‡æ¡£æ›´æ–°** - å½“å®Œæˆé‡è¦æ–‡æ¡£ç¼–å†™æˆ–æ›´æ–°æ—¶
   - ç¤ºä¾‹ï¼šå®ŒæˆæŸä¸ªæ¨¡å—çš„æŠ€æœ¯æ–‡æ¡£
   - ç¤ºä¾‹ï¼šæ›´æ–°åŠŸèƒ½æ¸…å•çŠ¶æ€

#### ä½•æ—¶ä¸æäº¤ï¼š

- âŒ åŠŸèƒ½åªå®Œæˆä¸€åŠï¼Œè¿˜ä¸èƒ½è¿è¡Œ
- âŒ ä»£ç è¿˜æœ‰æ˜æ˜¾çš„ç¼–è¯‘é”™è¯¯æˆ–æµ‹è¯•å¤±è´¥
- âŒ åªæ˜¯ä¸´æ—¶è°ƒè¯•ä»£ç 
- âŒ åªä¿®æ”¹äº†å‡ è¡Œæ³¨é‡Š

#### æäº¤æ ‡å‡†ï¼š

åœ¨æäº¤å‰ç¡®ä¿ï¼š
- âœ… ä»£ç å¯ä»¥ç¼–è¯‘é€šè¿‡
- âœ… ç›¸å…³æµ‹è¯•å·²ç¼–å†™å¹¶é€šè¿‡
- âœ… åŠŸèƒ½å¯ä»¥ç‹¬ç«‹è¿è¡Œï¼ˆæˆ–ä½œä¸ºæ•´ä½“çš„ä¸€éƒ¨åˆ†å·¥ä½œï¼‰
- âœ… æœ‰æ¸…æ™°çš„æäº¤ä¿¡æ¯è¯´æ˜æœ¬æ¬¡å®ç°çš„å†…å®¹
- âœ… ç›¸å…³æ–‡æ¡£å·²åŒæ­¥æ›´æ–°

#### æäº¤ä¿¡æ¯è¦æ±‚ï¼š

```
feat(<module>): <ç®€çŸ­æè¿°>

## å®ç°å†…å®¹
- âœ… åŠŸèƒ½ç‚¹ 1
- âœ… åŠŸèƒ½ç‚¹ 2
- âœ… åŠŸèƒ½ç‚¹ 3

## æŠ€æœ¯ç»†èŠ‚ï¼ˆå¯é€‰ï¼‰
- ä»£ç é‡: ~XXX è¡Œ
- æµ‹è¯•è¦†ç›–: XX%
- æ ¸å¿ƒç‰¹æ€§: ...

## ç›¸å…³æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰
- æŠ€æœ¯æ–‡æ¡£: docs/XXX.md
- ä½¿ç”¨ç¤ºä¾‹: examples/XXX.go
```

#### ç¤ºä¾‹ï¼š

**å¥½çš„æäº¤**ï¼š
```bash
# å®Œæˆäº† Milvus å‘é‡å­˜å‚¨çš„å®Œæ•´å®ç°
git commit -m "feat(retrieval): å®ç° Milvus 2.6+ å‘é‡å­˜å‚¨å’Œ Hybrid Search

- âœ… åŸºç¡€ CRUD æ“ä½œ
- âœ… Hybrid Search (å‘é‡ + BM25)
- âœ… RRF å’ŒåŠ æƒèåˆé‡æ’åº
- âœ… å®Œæ•´æµ‹è¯•è¦†ç›–

ä»£ç é‡: ~1300 è¡Œï¼ˆå«æµ‹è¯•ï¼‰"
```

**ä¸å¥½çš„æäº¤**ï¼š
```bash
# å¤ªç¬¼ç»Ÿï¼Œæ²¡æœ‰è¯´æ˜å…·ä½“å®Œæˆäº†ä»€ä¹ˆ
git commit -m "update code"

# åŠŸèƒ½è¿˜æ²¡å®Œæˆå°±æäº¤
git commit -m "feat: add milvus (WIP)"

# æäº¤äº†åŠæˆå“
git commit -m "feat: milvus implementation (not tested)"
```

---

## AI è¾…åŠ©å¼€å‘æç¤º

### 1. è¯·æ±‚ä»£ç ç”Ÿæˆæ—¶

```markdown
å®ç°æ¨¡å— M{ID}: {æ¨¡å—åç§°}

è®¾è®¡æ–‡æ¡£ï¼š{ä»è®¾è®¡æ–¹æ¡ˆå¤åˆ¶}

ä¾èµ–æ¨¡å—ï¼š{å·²å®ç°çš„æ¥å£å®šä¹‰}

è¦æ±‚ï¼š
1. éµå¾ªé¡¹ç›® .cursorrules è§„èŒƒ
2. åŒ…å«å®Œæ•´é”™è¯¯å¤„ç†
3. åŒ…å«å•å…ƒæµ‹è¯•
4. æ·»åŠ è¯¦ç»†æ³¨é‡Š
```

### 2. ä»£ç å®¡æŸ¥æ£€æŸ¥é¡¹

- [ ] æ˜¯å¦éµå¾ªå‘½åè§„èŒƒ
- [ ] æ˜¯å¦æœ‰å®Œæ•´çš„é”™è¯¯å¤„ç†
- [ ] æ˜¯å¦æœ‰ Context æ”¯æŒ
- [ ] æ˜¯å¦æœ‰å¹¶å‘å®‰å…¨ä¿æŠ¤
- [ ] æ˜¯å¦æœ‰èµ„æºæ¸…ç†ï¼ˆdeferï¼‰
- [ ] æ˜¯å¦æœ‰è¾“å…¥éªŒè¯
- [ ] æ˜¯å¦æœ‰å•å…ƒæµ‹è¯•
- [ ] æ˜¯å¦æœ‰æ–‡æ¡£æ³¨é‡Š

### 3. æ€§èƒ½æ£€æŸ¥é¡¹

- [ ] æ˜¯å¦é¢„åˆ†é…å®¹é‡
- [ ] æ˜¯å¦é¿å…ä¸å¿…è¦çš„åˆ†é…
- [ ] æ˜¯å¦ä½¿ç”¨å¹¶å‘æå‡æ€§èƒ½
- [ ] æ˜¯å¦æœ‰å†…å­˜æ³„æ¼é£é™©
- [ ] æ˜¯å¦æœ‰ goroutine æ³„æ¼é£é™©

---

## ç‰ˆæœ¬å‘å¸ƒè§„èŒƒ â­

### 1. CHANGELOG.md ç»´æŠ¤

**æ ¼å¼è¦æ±‚**ï¼š
- éµå¾ª [Keep a Changelog](https://keepachangelog.com/) æ ¼å¼
- éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/) è§„èŒƒ

**ç‰ˆæœ¬ç»“æ„**ï¼š
```markdown
## [Unreleased]

## [X.X.X] - YYYY-MM-DD

### ğŸ‰ Added - æ–°åŠŸèƒ½æè¿°

#### æ¨¡å—åç§°
- **åŠŸèƒ½ç‚¹** - è¯¦ç»†è¯´æ˜
  - å­åŠŸèƒ½ 1
  - å­åŠŸèƒ½ 2
  - æ€§èƒ½æ•°æ®

### ğŸ“Š ç»Ÿè®¡æ•°æ®
- æ–°å¢ä»£ç : ~X,XXX è¡Œ
- æµ‹è¯•ä»£ç : ~X,XXX è¡Œ
- æµ‹è¯•è¦†ç›–: XX%

### ğŸ“ Documentation
- æ–°å¢æ–‡æ¡£åˆ—è¡¨

### ğŸ› Bug Fixes
- ä¿®å¤é—®é¢˜åˆ—è¡¨

### âš¡ Performance
- æ€§èƒ½ä¼˜åŒ–é¡¹

### ğŸ”§ Infrastructure
- åŸºç¡€è®¾æ–½å˜æ›´

[X.X.X]: https://github.com/USER/REPO/compare/vX.X.X-1...vX.X.X
```

**æ¯æ¬¡å‘å¸ƒå¿…åš**ï¼š
1. âœ… åœ¨ `[Unreleased]` ä¸‹æ·»åŠ æ–°ç‰ˆæœ¬
2. âœ… å¡«å†™å‘å¸ƒæ—¥æœŸ
3. âœ… è¯¦ç»†åˆ—å‡ºæ‰€æœ‰å˜æ›´ï¼ˆAdded, Changed, Fixed ç­‰ï¼‰
4. âœ… æ·»åŠ ç»Ÿè®¡æ•°æ®
5. âœ… æ›´æ–°ç‰ˆæœ¬å¯¹æ¯”é“¾æ¥

### 2. å‘å¸ƒæ–‡æ¡£è§„èŒƒ

**æ¯æ¬¡å‘å¸ƒéœ€åˆ›å»º**ï¼š

1. **RELEASE_NOTES_vX.X.X.md**ï¼ˆå®Œæ•´ç‰ˆï¼‰
   - ä½ç½®ï¼š`docs/releases/`
   - å†…å®¹ï¼šè¯¦ç»†çš„åŠŸèƒ½è¯´æ˜ã€ä»£ç ç»Ÿè®¡ã€ä½¿ç”¨ç¤ºä¾‹ã€æ€§èƒ½æ•°æ®ã€å‡çº§æŒ‡å—
   - é•¿åº¦ï¼š500-1000 è¡Œ

2. **GITHUB_RELEASE_vX.X.X.md**ï¼ˆç®€æ´ç‰ˆï¼‰
   - ä½ç½®ï¼š`docs/releases/`
   - å†…å®¹ï¼šé€‚åˆå¤åˆ¶åˆ° GitHub Release çš„ç®€æ´ç‰ˆæœ¬
   - é•¿åº¦ï¼š200-500 è¡Œ
   - åŒ…å«ï¼šæ ¸å¿ƒåŠŸèƒ½ã€å¿«é€Ÿå¼€å§‹ã€ç»Ÿè®¡æ•°æ®

3. **VX.X.X_USER_GUIDE.md**ï¼ˆç”¨æˆ·æŒ‡å—ï¼‰
   - ä½ç½®ï¼š`docs/`
   - å†…å®¹ï¼šå®Œæ•´çš„ä½¿ç”¨æŒ‡å—ã€API å‚è€ƒã€æœ€ä½³å®è·µ
   - é•¿åº¦ï¼šæ ¹æ®åŠŸèƒ½å¤æ‚åº¦

4. **RELEASE_CHECKLIST_vX.X.X.md**ï¼ˆæ£€æŸ¥æ¸…å•ï¼‰
   - ä½ç½®ï¼š`docs/releases/`
   - å†…å®¹ï¼šå‘å¸ƒå‰æ£€æŸ¥é¡¹ã€å‘å¸ƒæ­¥éª¤ã€éªŒè¯æ–¹æ³•

**å‘å¸ƒæ–‡æ¡£æ¨¡æ¿ç»“æ„**ï¼š
```markdown
# v0.X.X - åŠŸèƒ½åç§°

**å‘å¸ƒæ—¥æœŸ**: YYYY-MM-DD
**æ ‡ç­¾**: vX.X.X

## ğŸŒŸ é‡å¤§æ›´æ–°
## âœ¨ æ–°åŠŸèƒ½
## ğŸ“¦ å®Œæ•´äº¤ä»˜
## ğŸš€ å¿«é€Ÿå¼€å§‹
## ğŸ“Š æ€§èƒ½ä¸æ•ˆæœ
## ğŸ’ª æ ¸å¿ƒä¼˜åŠ¿
## ğŸ“š æ–‡æ¡£ä¸ç¤ºä¾‹
## ğŸ”„ å‡çº§æŒ‡å—
## ğŸ“ è”ç³»æ–¹å¼
```

### 3. å‘å¸ƒæµç¨‹ â­

**å®Œæ•´å‘å¸ƒæ­¥éª¤**ï¼š

```bash
# æ­¥éª¤ 1: å®Œæˆå¼€å‘å’Œæµ‹è¯•
go test ./... -v                    # æ‰€æœ‰æµ‹è¯•é€šè¿‡
go test ./... -cover                # æ£€æŸ¥è¦†ç›–ç‡

# æ­¥éª¤ 2: æ›´æ–°æ–‡æ¡£
# - æ›´æ–° CHANGELOG.md
# - åˆ›å»º docs/releases/RELEASE_NOTES_vX.X.X.md
# - åˆ›å»º docs/releases/GITHUB_RELEASE_vX.X.X.md
# - åˆ›å»º docs/VX.X.X_USER_GUIDE.md
# - æ›´æ–° README.mdï¼ˆå¦‚æœ‰æ–°åŠŸèƒ½ï¼‰
# - æ›´æ–° docs/releases/README.md

# æ­¥éª¤ 3: æäº¤ä»£ç 
git add .
git commit -m "docs: vX.X.X å‘å¸ƒå‡†å¤‡"

# æ­¥éª¤ 4: åˆ›å»º Git Tag
git tag -a vX.X.X -m "Release vX.X.X - åŠŸèƒ½åç§°

æ ¸å¿ƒåŠŸèƒ½ï¼š
âœ… åŠŸèƒ½ 1
âœ… åŠŸèƒ½ 2
âœ… åŠŸèƒ½ 3

äº¤ä»˜æˆæœï¼š
â€¢ XX,XXX è¡Œæ–°å¢ä»£ç 
â€¢ XX ä¸ªæ–°æµ‹è¯•
â€¢ XX ä¸ªç¤ºä¾‹ç¨‹åº

è¯¦è§ docs/releases/RELEASE_NOTES_vX.X.X.md"

# æ­¥éª¤ 5: æ¨é€åˆ°è¿œç¨‹
git push origin main
git push origin vX.X.X

# æ­¥éª¤ 6: åˆ›å»º GitHub Release
# - è®¿é—® https://github.com/USER/REPO/releases/new
# - é€‰æ‹© Tag: vX.X.X
# - Title: vX.X.X - åŠŸèƒ½åç§°
# - æè¿°: å¤åˆ¶ docs/releases/GITHUB_RELEASE_vX.X.X.md
# - å‘å¸ƒ

# æ­¥éª¤ 7: éªŒè¯å‘å¸ƒ
go get github.com/USER/REPO@vX.X.X  # æµ‹è¯•å®‰è£…
```

**å‘å¸ƒæ—¶æœº**ï¼š
- Major (X.0.0): ä¸å…¼å®¹çš„ API å˜æ›´
- Minor (0.X.0): å‘åå…¼å®¹çš„åŠŸèƒ½æ–°å¢
- Patch (0.0.X): å‘åå…¼å®¹çš„é—®é¢˜ä¿®æ­£

**å‘å¸ƒå‰æ£€æŸ¥æ¸…å•**ï¼š
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ˆ100%ï¼‰
- [ ] æµ‹è¯•è¦†ç›–ç‡è¾¾æ ‡ï¼ˆ>70%ï¼‰
- [ ] æ‰€æœ‰ç¤ºä¾‹å¯è¿è¡Œ
- [ ] CHANGELOG.md å·²æ›´æ–°
- [ ] å‘å¸ƒæ–‡æ¡£å·²åˆ›å»º
- [ ] README.md å·²æ›´æ–°ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] ç‰ˆæœ¬å·ç¬¦åˆè¯­ä¹‰åŒ–ç‰ˆæœ¬
- [ ] Git Tag å·²åˆ›å»º
- [ ] æäº¤ä¿¡æ¯æ¸…æ™°

### 4. ç‰ˆæœ¬å·ç®¡ç†

**è¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ**ï¼š
```
vMAJOR.MINOR.PATCH

MAJOR: ä¸å…¼å®¹çš„ API å˜æ›´
MINOR: å‘åå…¼å®¹çš„åŠŸèƒ½æ–°å¢
PATCH: å‘åå…¼å®¹çš„é—®é¢˜ä¿®æ­£
```

**ç¤ºä¾‹**ï¼š
- v0.1.0 â†’ v0.1.1: Bug ä¿®å¤
- v0.1.1 â†’ v0.2.0: æ–°å¢åŠŸèƒ½
- v0.2.0 â†’ v1.0.0: API é‡å¤§å˜æ›´

**Pre-release ç‰ˆæœ¬**ï¼š
- v1.0.0-alpha.1
- v1.0.0-beta.1
- v1.0.0-rc.1

---

## å‚è€ƒèµ„æº

- è®¾è®¡æ–‡æ¡£: `../LangChain-LangGraph-Goé‡å†™è®¾è®¡æ–¹æ¡ˆ.md`
- Python LangChain: https://github.com/langchain-ai/langchain
- Python LangGraph: https://github.com/langchain-ai/langgraph
- Go Code Review: https://github.com/golang/go/wiki/CodeReviewComments
- Effective Go: https://go.dev/doc/effective_go
- Keep a Changelog: https://keepachangelog.com/
- Semantic Versioning: https://semver.org/
- Markdown Guide: https://www.markdownguide.org/

---

## å½“å‰è¿›åº¦è·Ÿè¸ª

```
[âœ…] v0.1.0: åŸºç¡€åŠŸèƒ½ (7ç§Agent, 38ä¸ªå·¥å…·, LangGraph)
[âœ…] v0.1.1: æ‰©å±•åŠŸèƒ½ (4ä¸ªå‘é‡å­˜å‚¨, 3ä¸ªLLM, 3ä¸ªLoader, é«˜çº§RAG)
[âœ…] v0.3.0: Multi-Agent ç³»ç»Ÿ
[âœ…] v0.4.0: Hybrid Search & Advanced RAG
[âœ…] v0.4.1: GraphRAG (å›¾å¢å¼ºæ£€ç´¢)
[âœ…] v0.4.2: Learning Retrieval (å­¦ä¹ å‹æ£€ç´¢)
```

æ›´æ–°æ­¤æ–‡ä»¶åº•éƒ¨çš„è¿›åº¦ï¼Œæ ‡è®°å·²å®Œæˆçš„ç‰ˆæœ¬ã€‚
