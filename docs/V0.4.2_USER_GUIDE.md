# LangChain-Go v0.4.2 ç”¨æˆ·æŒ‡å—

**ç‰ˆæœ¬**: v0.4.2  
**ä¸»é¢˜**: Learning Retrieval - å­¦ä¹ å‹æ£€ç´¢  
**å‘å¸ƒæ—¥æœŸ**: 2026-01-21

---

## ğŸ“– æ¦‚è¿°

LangChain-Go v0.4.2 å¼•å…¥äº†**å­¦ä¹ å‹æ£€ç´¢ï¼ˆLearning Retrievalï¼‰**ç³»ç»Ÿï¼Œèƒ½å¤Ÿä»ç”¨æˆ·åé¦ˆä¸­è‡ªåŠ¨å­¦ä¹ å¹¶æŒç»­ä¼˜åŒ–æ£€ç´¢è´¨é‡ã€‚

### æ ¸å¿ƒèƒ½åŠ›

1. **ç”¨æˆ·åé¦ˆæ”¶é›†** - è‡ªåŠ¨æ”¶é›†æ˜¾å¼å’Œéšå¼åé¦ˆ
2. **è´¨é‡è¯„ä¼°** - å¤šç»´åº¦è¯„ä¼°æ£€ç´¢è´¨é‡
3. **å‚æ•°ä¼˜åŒ–** - æ™ºèƒ½ä¼˜åŒ–æ£€ç´¢å‚æ•°
4. **A/B æµ‹è¯•** - ç§‘å­¦éªŒè¯ä¼˜åŒ–æ•ˆæœ

### é€‚ç”¨åœºæ™¯

- ğŸ“š æ–‡æ¡£æ£€ç´¢ç³»ç»Ÿ
- ğŸ›’ ç”µå•†æœç´¢å¼•æ“
- ğŸ’¼ ä¼ä¸šçŸ¥è¯†åº“
- ğŸ” é€šç”¨æœç´¢æœåŠ¡
- ğŸ¤– RAG åº”ç”¨

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
go get github.com/zhucl121/langchain-go@v0.4.2
```

### 5 åˆ†é’Ÿä¸Šæ‰‹

```go
package main

import (
    "context"
    "github.com/zhucl121/langchain-go/retrieval/learning/feedback"
    "github.com/zhucl121/langchain-go/retrieval/learning/evaluation"
)

func main() {
    ctx := context.Background()
    
    // 1. åˆ›å»ºåé¦ˆæ”¶é›†å™¨
    storage := feedback.NewMemoryStorage()
    collector := feedback.NewCollector(storage)
    
    // 2. è®°å½•æŸ¥è¯¢å’Œç»“æœ
    collector.RecordQuery(ctx, &feedback.Query{
        ID:       "q1",
        Text:     "ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ï¼Ÿ",
        Strategy: "hybrid",
    })
    
    // 3. æ”¶é›†ç”¨æˆ·åé¦ˆ
    collector.CollectExplicitFeedback(ctx, &feedback.ExplicitFeedback{
        QueryID: "q1",
        Type:    feedback.FeedbackTypeRating,
        Rating:  5,
    })
    
    // 4. è¯„ä¼°è´¨é‡
    evaluator := evaluation.NewEvaluator(collector)
    qf, _ := collector.GetQueryFeedback(ctx, "q1")
    metrics, _ := evaluator.EvaluateQuery(ctx, qf)
    
    fmt.Printf("ç»¼åˆå¾—åˆ†: %.3f\n", metrics.OverallScore)
}
```

---

## ğŸ“¦ æ¨¡å—è¯¦è§£

### Module 1: åé¦ˆæ”¶é›† (feedback)

#### åŠŸèƒ½

æ”¶é›†ç”¨æˆ·å¯¹æ£€ç´¢ç»“æœçš„åé¦ˆã€‚

#### åé¦ˆç±»å‹

**æ˜¾å¼åé¦ˆ**ï¼ˆç”¨æˆ·ä¸»åŠ¨æä¾›ï¼‰ï¼š
```go
// ç‚¹èµ/ç‚¹è¸©
collector.CollectExplicitFeedback(ctx, &feedback.ExplicitFeedback{
    QueryID: queryID,
    Type:    feedback.FeedbackTypePositive,
})

// è¯„åˆ†ï¼ˆ1-5 æ˜Ÿï¼‰
collector.CollectExplicitFeedback(ctx, &feedback.ExplicitFeedback{
    QueryID: queryID,
    Type:    feedback.FeedbackTypeRating,
    Rating:  5,
    Comment: "ç»“æœå¾ˆå¥½ï¼",
})
```

**éšå¼åé¦ˆ**ï¼ˆä»è¡Œä¸ºæ¨æ–­ï¼‰ï¼š
```go
// ç‚¹å‡»
collector.CollectImplicitFeedback(ctx, &feedback.ImplicitFeedback{
    QueryID:    queryID,
    DocumentID: docID,
    Action:     feedback.ActionClick,
})

// é˜…è¯»
collector.CollectImplicitFeedback(ctx, &feedback.ImplicitFeedback{
    QueryID:    queryID,
    DocumentID: docID,
    Action:     feedback.ActionRead,
    Duration:   120 * time.Second,
})
```

#### å­˜å‚¨é€‰é¡¹

**å¼€å‘/æµ‹è¯• - å†…å­˜å­˜å‚¨**ï¼š
```go
storage := feedback.NewMemoryStorage()
```

**ç”Ÿäº§ç¯å¢ƒ - PostgreSQL**ï¼š
```go
db, _ := sql.Open("postgres", "postgres://...")
storage := feedback.NewPostgreSQLStorage(db)

// åˆå§‹åŒ–è¡¨ç»“æ„ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
storage.(*feedback.PostgreSQLStorage).InitSchema(ctx)
```

#### ç»Ÿè®¡èšåˆ

```go
stats, _ := collector.AggregateStats(ctx, feedback.AggregateOptions{
    TimeRange: 24 * time.Hour,
    MinRating: 3,
})

fmt.Printf("æ€»æŸ¥è¯¢æ•°: %d\n", stats.TotalQueries)
fmt.Printf("å¹³å‡è¯„åˆ†: %.2f\n", stats.AvgRating)
fmt.Printf("ç‚¹å‡»ç‡: %.1f%%\n", stats.AvgCTR*100)
```

---

### Module 2: è´¨é‡è¯„ä¼° (evaluation)

#### åŠŸèƒ½

å¤šç»´åº¦è¯„ä¼°æ£€ç´¢è´¨é‡ã€‚

#### è¯„ä¼°æŒ‡æ ‡

**ç›¸å…³æ€§æŒ‡æ ‡**ï¼š
- **Precision**: æ£€ç´¢ç»“æœä¸­ç›¸å…³æ–‡æ¡£çš„æ¯”ä¾‹
- **Recall**: ç›¸å…³æ–‡æ¡£ä¸­è¢«æ£€ç´¢åˆ°çš„æ¯”ä¾‹
- **F1 Score**: Precision å’Œ Recall çš„è°ƒå’Œå¹³å‡
- **NDCG**: å½’ä¸€åŒ–æŠ˜æŸç´¯è®¡å¢ç›Šï¼ˆè€ƒè™‘æ’åºï¼‰
- **MRR**: å¹³å‡å€’æ•°æ’åï¼ˆé¦–ä¸ªç›¸å…³æ–‡æ¡£çš„ä½ç½®ï¼‰

**ç”¨æˆ·æ»¡æ„åº¦**ï¼š
- **AvgRating**: å¹³å‡è¯„åˆ†
- **CTR**: ç‚¹å‡»ç‡
- **ReadRate**: é˜…è¯»ç‡

#### ä½¿ç”¨ç¤ºä¾‹

```go
evaluator := evaluation.NewEvaluator(collector)

// è¯„ä¼°å•ä¸ªæŸ¥è¯¢
qf, _ := collector.GetQueryFeedback(ctx, queryID)
metrics, _ := evaluator.EvaluateQuery(ctx, qf)

fmt.Printf("NDCG: %.3f\n", metrics.NDCG)
fmt.Printf("MRR: %.3f\n", metrics.MRR)
fmt.Printf("ç»¼åˆå¾—åˆ†: %.3f\n", metrics.OverallScore)

// è¯„ä¼°ç­–ç•¥
strategyMetrics, _ := evaluator.EvaluateStrategy(ctx, "hybrid", 
    evaluation.EvaluateOptions{
        TimeRange:     24 * time.Hour,
        MinSampleSize: 30,
    })

// å¯¹æ¯”ä¸¤ä¸ªç­–ç•¥
comparison, _ := evaluator.CompareStrategies(ctx, "hybrid", "vector")
fmt.Printf("è·èƒœè€…: %s\n", comparison.Winner)
fmt.Printf("æå‡: %.2f%%\n", comparison.Improvement)
```

#### ç›¸å…³æ€§æ¨¡å‹

**é»˜è®¤æ¨¡å‹**ï¼ˆç»¼åˆå¤šç§åé¦ˆï¼‰ï¼š
```go
evaluator := evaluation.NewEvaluator(collector)
```

**éšå¼åé¦ˆæ¨¡å‹**ï¼ˆå¯é…ç½®æƒé‡ï¼‰ï¼š
```go
model := &evaluation.ImplicitRelevanceModel{
    ClickWeight:    0.3,
    ReadWeight:     0.5,
    DurationWeight: 0.2,
}
evaluator := evaluation.NewEvaluatorWithModel(collector, model)
```

---

### Module 3: å‚æ•°ä¼˜åŒ– (optimization)

#### åŠŸèƒ½

ä½¿ç”¨è´å¶æ–¯ä¼˜åŒ–è‡ªåŠ¨è°ƒæ•´æ£€ç´¢å‚æ•°ã€‚

#### åŸºæœ¬ç”¨æ³•

```go
// åˆ›å»ºä¼˜åŒ–å™¨
optimizer := optimization.NewOptimizer(evaluator, collector, 
    optimization.DefaultConfig())

// å®šä¹‰å‚æ•°ç©ºé—´
paramSpace := optimization.ParameterSpace{
    Params: []optimization.Parameter{
        {
            Name:    "top_k",
            Type:    optimization.ParamTypeInt,
            Min:     5,
            Max:     30,
            Default: 10,
        },
        {
            Name:    "temperature",
            Type:    optimization.ParamTypeFloat,
            Min:     0.1,
            Max:     1.0,
            Default: 0.7,
        },
    },
}

// è¿è¡Œä¼˜åŒ–
result, _ := optimizer.Optimize(ctx, strategyID, paramSpace, 
    optimization.OptimizeOptions{
        MaxIterations: 50,
        TargetMetric:  "overall_score",
    })

fmt.Printf("æœ€ä½³å‚æ•°: %v\n", result.BestParams)
fmt.Printf("æ€§èƒ½æå‡: %.2f%%\n", result.Improvement)
```

#### è‡ªåŠ¨è°ƒä¼˜

æŒç»­ç›‘æ§å’Œä¼˜åŒ–ï¼š

```go
go optimizer.AutoTune(ctx, strategyID, paramSpace, 
    optimization.AutoTuneConfig{
        CheckInterval:  1 * time.Hour,
        ScoreThreshold: 0.7,
        MinSampleSize:  30,
    })
```

#### å‚æ•°ç±»å‹

**æ•´æ•°å‚æ•°**ï¼š
```go
{Name: "top_k", Type: ParamTypeInt, Min: 5, Max: 30, Default: 10}
```

**æµ®ç‚¹å‚æ•°**ï¼š
```go
{Name: "temperature", Type: ParamTypeFloat, Min: 0.1, Max: 1.0, Default: 0.7}
```

**ç¦»æ•£é€‰æ‹©**ï¼š
```go
{Name: "strategy", Type: ParamTypeChoice, 
 Values: []string{"hybrid", "vector", "graph"}, Default: "hybrid"}
```

---

### Module 4: A/B æµ‹è¯• (abtest)

#### åŠŸèƒ½

ç§‘å­¦å¯¹æ¯”ä¸åŒç­–ç•¥æˆ–å‚æ•°çš„æ•ˆæœã€‚

#### åˆ›å»ºå®éªŒ

```go
manager := abtest.NewManager(storage)

experiment := &abtest.Experiment{
    ID:   "exp-001",
    Name: "æ£€ç´¢ç­–ç•¥å¯¹æ¯”",
    Variants: []abtest.Variant{
        {
            ID:       "control",
            Name:     "å¯¹ç…§ç»„",
            Strategy: "hybrid",
            Params:   map[string]interface{}{"top_k": 10},
            Weight:   0.5,
        },
        {
            ID:       "treatment",
            Name:     "å®éªŒç»„",
            Strategy: "vector",
            Params:   map[string]interface{}{"top_k": 15},
            Weight:   0.5,
        },
    },
    Traffic: 1.0, // 100% æµé‡
}

manager.CreateExperiment(ctx, experiment)
manager.StartExperiment(ctx, experiment.ID)
```

#### ç”¨æˆ·åˆ†æµ

```go
// ç”¨æˆ·è®¿é—®æ—¶åˆ†é…å˜ä½“
variantID, _ := manager.AssignVariant(ctx, userID, experimentID)

// ä½¿ç”¨åˆ†é…çš„å˜ä½“å¤„ç†æŸ¥è¯¢
// ...

// è®°å½•ç»“æœ
manager.RecordResult(ctx, &abtest.ExperimentResult{
    ExperimentID: experimentID,
    VariantID:    variantID,
    UserID:       userID,
    Metrics:      metrics,
})
```

#### åˆ†æç»“æœ

```go
analysis, _ := manager.AnalyzeExperiment(ctx, experimentID)

fmt.Printf("è·èƒœè€…: %s\n", analysis.Winner)
fmt.Printf("ç½®ä¿¡åº¦: %.2f%%\n", analysis.Confidence*100)
fmt.Printf("P-Value: %.3f\n", analysis.PValue)

if analysis.Completed {
    fmt.Println("âœ… ç»“æœå…·æœ‰ç»Ÿè®¡æ˜¾è‘—æ€§")
    // å¯ä»¥æ¨å¹¿è·èƒœå˜ä½“
    manager.EndExperiment(ctx, experimentID, analysis.Winner)
}
```

---

## ğŸ”„ å®Œæ•´å·¥ä½œæµ

### å·¥ä½œæµç¨‹å›¾

```
1. æ”¶é›†åé¦ˆ
   â†“
2. è¯„ä¼°è´¨é‡ â†’ å‘ç°é—®é¢˜ï¼ˆå¾—åˆ†ä½ï¼‰
   â†“
3. ä¼˜åŒ–å‚æ•° â†’ æ‰¾åˆ°æ›´å¥½çš„é…ç½®
   â†“
4. A/B æµ‹è¯• â†’ éªŒè¯ä¼˜åŒ–æ•ˆæœ
   â†“
5. æ¨å¹¿åº”ç”¨ â†’ æ›´æ–°ç”Ÿäº§é…ç½®
   â†“
   å›åˆ°æ­¥éª¤ 1ï¼ˆæŒç»­æ”¹è¿›ï¼‰
```

### ä»£ç ç¤ºä¾‹

å®Œæ•´å·¥ä½œæµå‚è§ï¼š`examples/learning_complete_demo/`

---

## ğŸ­ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### æ¶æ„å»ºè®®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åº”ç”¨æœåŠ¡å™¨      â”‚
â”‚  (Go åº”ç”¨)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          â”‚             â”‚
    â–¼          â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚åé¦ˆæ”¶é›†â”‚ â”‚è´¨é‡è¯„ä¼°â”‚ â”‚å‚æ•°ä¼˜åŒ–     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
     â”‚          â”‚            â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  PostgreSQL   â”‚
        â”‚  (æŒä¹…åŒ–å­˜å‚¨) â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### éƒ¨ç½²æ¸…å•

1. **æ•°æ®åº“å‡†å¤‡**
   ```bash
   # å¯åŠ¨ PostgreSQL
   docker run -d \
     -e POSTGRES_PASSWORD=password \
     -e POSTGRES_DB=langchain_learning \
     -p 5432:5432 \
     postgres:15
   ```

2. **åˆå§‹åŒ–å­˜å‚¨**
   ```go
   db, _ := sql.Open("postgres", connStr)
   storage := feedback.NewPostgreSQLStorage(db)
   storage.(*feedback.PostgreSQLStorage).InitSchema(ctx)
   ```

3. **å¯åŠ¨æœåŠ¡**
   ```go
   // åˆ›å»ºç»„ä»¶
   collector := feedback.NewCollector(storage)
   evaluator := evaluation.NewEvaluator(collector)
   optimizer := optimization.NewOptimizer(evaluator, collector, config)
   
   // å¼€å¯è‡ªåŠ¨è°ƒä¼˜
   go optimizer.AutoTune(ctx, strategyID, paramSpace, config)
   ```

### é…ç½®å»ºè®®

**åé¦ˆæ”¶é›†**ï¼š
```go
// å®æ—¶æ”¶é›†ï¼Œå¼‚æ­¥å­˜å‚¨
go func() {
    collector.CollectImplicitFeedback(ctx, feedback)
}()
```

**è´¨é‡è¯„ä¼°**ï¼š
```go
// æ¯å°æ—¶è¯„ä¼°ä¸€æ¬¡
ticker := time.NewTicker(1 * time.Hour)
for range ticker.C {
    metrics, _ := evaluator.EvaluateStrategy(ctx, strategyID, opts)
    // è®°å½•åˆ°ç›‘æ§ç³»ç»Ÿ
}
```

**å‚æ•°ä¼˜åŒ–**ï¼š
```go
// è‡ªåŠ¨è°ƒä¼˜é…ç½®
config := optimization.AutoTuneConfig{
    CheckInterval:  1 * time.Hour,
    ScoreThreshold: 0.7,
    MinSampleSize:  100,
}
```

### æ€§èƒ½ä¼˜åŒ–

1. **æ‰¹é‡æ“ä½œ**
   ```go
   // ä½¿ç”¨äº‹åŠ¡æ‰¹é‡æ’å…¥
   tx, _ := db.Begin()
   for _, query := range queries {
       storage.SaveQuery(ctx, query)
   }
   tx.Commit()
   ```

2. **å¼‚æ­¥å¤„ç†**
   ```go
   // å¼‚æ­¥æ”¶é›†åé¦ˆï¼Œä¸é˜»å¡ä¸»æµç¨‹
   go collector.CollectImplicitFeedback(ctx, feedback)
   ```

3. **ç¼“å­˜ç­–ç•¥**
   ```go
   // ç¼“å­˜è¯„ä¼°ç»“æœ
   var cachedMetrics *evaluation.StrategyMetrics
   var cacheTime time.Time
   
   if time.Since(cacheTime) > 5*time.Minute {
       cachedMetrics, _ = evaluator.EvaluateStrategy(ctx, strategyID, opts)
       cacheTime = time.Now()
   }
   ```

---

## ğŸ“Š è¯„ä¼°æŒ‡æ ‡è¯¦è§£

### NDCG (Normalized Discounted Cumulative Gain)

å½’ä¸€åŒ–æŠ˜æŸç´¯è®¡å¢ç›Šï¼Œè€ƒè™‘æ–‡æ¡£æ’åºä½ç½®ã€‚

**è®¡ç®—å…¬å¼**ï¼š
```
NDCG@k = DCG@k / IDCG@k

DCG@k = Î£ (rel_i / log2(i+1))
```

**é€‚ç”¨åœºæ™¯**ï¼š
- æ’åºè´¨é‡è¯„ä¼°
- ä½ç½®æ•æ„Ÿçš„åœºæ™¯

**ç†æƒ³å€¼**: 1.0ï¼ˆå®Œç¾æ’åºï¼‰

### MRR (Mean Reciprocal Rank)

å¹³å‡å€’æ•°æ’åï¼Œå…³æ³¨é¦–ä¸ªç›¸å…³æ–‡æ¡£çš„ä½ç½®ã€‚

**è®¡ç®—å…¬å¼**ï¼š
```
MRR = 1 / rank_of_first_relevant_doc
```

**é€‚ç”¨åœºæ™¯**ï¼š
- å•ä¸€ç­”æ¡ˆåœºæ™¯
- ç”¨æˆ·åªçœ‹å‰å‡ ä¸ªç»“æœ

**ç†æƒ³å€¼**: 1.0ï¼ˆé¦–ä¸ªç»“æœç›¸å…³ï¼‰

### Precision & Recall

**Precisionï¼ˆç²¾ç¡®ç‡ï¼‰**ï¼š
```
Precision = ç›¸å…³æ–‡æ¡£æ•° / æ£€ç´¢æ–‡æ¡£æ€»æ•°
```

**Recallï¼ˆå¬å›ç‡ï¼‰**ï¼š
```
Recall = æ£€ç´¢åˆ°çš„ç›¸å…³æ–‡æ¡£æ•° / æ€»ç›¸å…³æ–‡æ¡£æ•°
```

**F1 Score**ï¼š
```
F1 = 2 * (Precision * Recall) / (Precision + Recall)
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### åé¦ˆæ”¶é›†

âœ… **DO**:
- å°½å¯èƒ½å¤šæ”¶é›†éšå¼åé¦ˆï¼ˆæˆæœ¬ä½ï¼‰
- åœ¨åˆé€‚æ—¶æœºè¯·æ±‚æ˜¾å¼åé¦ˆï¼ˆä¸è¦è¿‡åº¦æ‰“æ‰°ï¼‰
- è®°å½•å®Œæ•´çš„ä¸Šä¸‹æ–‡ä¿¡æ¯
- å®šæœŸæ¸…ç†è¿‡æœŸæ•°æ®

âŒ **DON'T**:
- ä¸è¦åªæ”¶é›†æ­£é¢åé¦ˆ
- ä¸è¦å¿½è§†ç”¨æˆ·è¡Œä¸ºæ•°æ®
- ä¸è¦åœ¨æ¯æ¬¡æŸ¥è¯¢åéƒ½è¦æ±‚è¯„åˆ†

### è´¨é‡è¯„ä¼°

âœ… **DO**:
- ä½¿ç”¨å¤šä¸ªæŒ‡æ ‡ç»¼åˆè¯„ä¼°
- å…³æ³¨è¶‹åŠ¿è€Œéç»å¯¹å€¼
- å®šæœŸè¯„ä¼°ï¼Œå»ºç«‹åŸºçº¿
- æŒ‰ç”¨æˆ·ç¾¤ä½“åˆ†æ

âŒ **DON'T**:
- ä¸è¦åªçœ‹å•ä¸€æŒ‡æ ‡
- ä¸è¦å¿½è§†æ ·æœ¬é‡è¦æ±‚
- ä¸è¦è¿‡åº¦è§£è¯»çŸ­æœŸæ³¢åŠ¨

### å‚æ•°ä¼˜åŒ–

âœ… **DO**:
- å®šä¹‰åˆç†çš„å‚æ•°èŒƒå›´
- ç¡®ä¿æœ‰è¶³å¤Ÿæ ·æœ¬é‡ï¼ˆ> 30ï¼‰
- è®¾ç½®å……è¶³çš„è¿­ä»£æ¬¡æ•°ï¼ˆ50-100ï¼‰
- éªŒè¯ä¼˜åŒ–åçš„æ•ˆæœ

âŒ **DON'T**:
- ä¸è¦é¢‘ç¹ä¼˜åŒ–ï¼ˆå»ºè®®æ¯å‘¨æˆ–æ¯æœˆï¼‰
- ä¸è¦åŒæ—¶ä¼˜åŒ–æ‰€æœ‰å‚æ•°
- ä¸è¦è·³è¿‡éªŒè¯æ­¥éª¤

### A/B æµ‹è¯•

âœ… **DO**:
- é¢„å…ˆç¡®å®šæ ·æœ¬é‡å’Œå®éªŒå‘¨æœŸ
- åªæ”¹å˜ä¸€ä¸ªå˜é‡
- ç­‰å¾…è¶³å¤Ÿçš„æ•°æ®å†ä¸‹ç»“è®º
- å…³æ³¨é•¿æœŸæ•ˆæœ

âŒ **DON'T**:
- ä¸è¦è¿‡æ—©åœæ­¢å®éªŒ
- ä¸è¦é¢‘ç¹æŸ¥çœ‹ç»“æœ
- ä¸è¦å¿½è§†ç»Ÿè®¡æ˜¾è‘—æ€§
- ä¸è¦åŒæ—¶è¿è¡Œå¤ªå¤šå®éªŒ

---

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜ 1: è¯„ä¼°æŒ‡æ ‡å¼‚å¸¸

**ç—‡çŠ¶**: NDCG æˆ– MRR ä¸º 0

**åŸå› **: æ²¡æœ‰è¶³å¤Ÿçš„éšå¼åé¦ˆæ•°æ®

**è§£å†³**:
```go
// ç¡®ä¿æ”¶é›†äº†ç‚¹å‡»å’Œé˜…è¯»è¡Œä¸º
collector.CollectImplicitFeedback(ctx, &feedback.ImplicitFeedback{
    Action: feedback.ActionClick,
})
```

### é—®é¢˜ 2: ä¼˜åŒ–æ²¡æœ‰æå‡

**ç—‡çŠ¶**: ä¼˜åŒ–åå¾—åˆ†æ²¡æœ‰æå‡

**å¯èƒ½åŸå› **:
1. å½“å‰å‚æ•°å·²ç»æ¥è¿‘æœ€ä¼˜
2. æ ·æœ¬é‡ä¸è¶³
3. å‚æ•°ç©ºé—´å®šä¹‰ä¸åˆç†

**è§£å†³**:
```go
// å¢åŠ æ ·æœ¬é‡
opts.MinSampleSize = 100

// æ‰©å¤§å‚æ•°èŒƒå›´
param.Min = 1
param.Max = 50

// å¢åŠ è¿­ä»£æ¬¡æ•°
opts.MaxIterations = 100
```

### é—®é¢˜ 3: A/B æµ‹è¯•ä¸æ˜¾è‘—

**ç—‡çŠ¶**: p-value > 0.05

**åŸå› **: æ ·æœ¬é‡ä¸è¶³æˆ–æ•ˆåº”å¤ªå°

**è§£å†³**:
```go
// å¢åŠ æ ·æœ¬é‡
// å»¶é•¿å®éªŒå‘¨æœŸ
// æˆ–è€…æ¥å—å½“å‰ç»“æœï¼ˆå¯èƒ½ç¡®å®æ²¡æœ‰æ˜¾è‘—å·®å¼‚ï¼‰
```

---

## ğŸ“š API å‚è€ƒ

### Feedback åŒ…

| æ¥å£/ç±»å‹ | è¯´æ˜ |
|----------|------|
| `Collector` | åé¦ˆæ”¶é›†å™¨æ¥å£ |
| `Storage` | å­˜å‚¨æ¥å£ |
| `Query` | æŸ¥è¯¢ä¿¡æ¯ |
| `ExplicitFeedback` | æ˜¾å¼åé¦ˆ |
| `ImplicitFeedback` | éšå¼åé¦ˆ |
| `FeedbackStats` | èšåˆç»Ÿè®¡ |

### Evaluation åŒ…

| æ¥å£/ç±»å‹ | è¯´æ˜ |
|----------|------|
| `Evaluator` | è¯„ä¼°å™¨æ¥å£ |
| `QueryMetrics` | æŸ¥è¯¢æŒ‡æ ‡ |
| `StrategyMetrics` | ç­–ç•¥æŒ‡æ ‡ |
| `ComparisonResult` | å¯¹æ¯”ç»“æœ |
| `RelevanceModel` | ç›¸å…³æ€§æ¨¡å‹ |

### Optimization åŒ…

| æ¥å£/ç±»å‹ | è¯´æ˜ |
|----------|------|
| `Optimizer` | ä¼˜åŒ–å™¨æ¥å£ |
| `ParameterSpace` | å‚æ•°ç©ºé—´ |
| `OptimizeResult` | ä¼˜åŒ–ç»“æœ |
| `AutoTuneConfig` | è‡ªåŠ¨è°ƒä¼˜é…ç½® |

### ABTest åŒ…

| æ¥å£/ç±»å‹ | è¯´æ˜ |
|----------|------|
| `Manager` | A/B æµ‹è¯•ç®¡ç†å™¨ |
| `Experiment` | å®éªŒå®šä¹‰ |
| `Variant` | å˜ä½“é…ç½® |
| `ExperimentAnalysis` | åˆ†æç»“æœ |

---

## ğŸ”— ç›¸å…³èµ„æº

### ç¤ºä¾‹ç¨‹åº

1. `learning_feedback_demo` - åé¦ˆæ”¶é›†
2. `learning_evaluation_demo` - è´¨é‡è¯„ä¼°
3. `learning_optimization_demo` - å‚æ•°ä¼˜åŒ–
4. `learning_abtest_demo` - A/B æµ‹è¯•
5. `learning_postgres_demo` - PostgreSQL å­˜å‚¨
6. `learning_complete_demo` - å®Œæ•´å·¥ä½œæµ â­

### æ–‡æ¡£

- å®ç°è®¡åˆ’: `docs/V0.4.2_IMPLEMENTATION_PLAN.md`
- è¿›åº¦æŠ¥å‘Š: `docs/V0.4.2_PROGRESS.md`
- å‘å¸ƒè¯´æ˜: `RELEASE_NOTES_v0.4.2.md`

### ç¤¾åŒº

- GitHub: https://github.com/zhucl121/langchain-go
- Issues: https://github.com/zhucl121/langchain-go/issues
- Discussions: https://github.com/zhucl121/langchain-go/discussions

---

**æ–‡æ¡£ç‰ˆæœ¬**: v0.4.2  
**æ›´æ–°æ—¥æœŸ**: 2026-01-21  
**ä½œè€…**: LangChain-Go Team
